!function(e,t){"use strict";"function"==typeof define&&define.amd?define("ajax",t):"object"==typeof exports?exports=module.exports=t():e.ajax=t()}(this,function(){"use strict";function e(e){var r=["get","post","put","delete"];return e=e||{},e.baseUrl=e.baseUrl||"",e.method&&e.url?n(e.method,e.baseUrl+e.url,t(e.data),e):r.reduce(function(r,u){return r[u]=function(r,o){return n(u,e.baseUrl+r,t(o),e)},r},{})}function t(e){return e||null}function n(e,t,n,u){var c=["then","catch","always"],s=c.reduce(function(e,t){return e[t]=function(n){return e[t]=n,e},e},{}),i=new XMLHttpRequest;return i.open(e,t,!0),r(i,u.headers),i.addEventListener("readystatechange",o(s,i),!1),i.send(a(n)),s.abort=function(){return i.abort()},s}function r(e,t){t=t||{},u(t)||(t["Content-Type"]="application/x-www-form-urlencoded"),Object.keys(t).forEach(function(n){t[n]&&e.setRequestHeader(n,t[n])})}function u(e){return Object.keys(e).some(function(e){return"content-type"===e.toLowerCase()})}function o(e,t){return function n(){t.readyState===t.DONE&&(t.removeEventListener("readystatechange",n,!1),e.always.apply(e,c(t)),t.status>=200&&t.status<300?e.then.apply(e,c(t)):e["catch"].apply(e,c(t)))}}function c(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}return[t,e]}function a(e){return s(e)?i(e):e}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function i(e){return Object.keys(e).reduce(function(t,n){var r=t?t+"&":"";return r+f(n)+"="+f(e[n])},"")}function f(e){return encodeURIComponent(e)}return e});(function(){var domain;var prefix="https://";api={setDomain:function(domainUrl){domain=domainUrl},receive:function(resource,data,query){var url=resource;if(typeof data=="object"){if(query){url+="?"}for(var key in data){if(query){url+="&"+key+"="+data[key]}else{url+="/"+key+"/"+data[key]}}}if(["string","number"].indexOf(typeof data)!=-1){url+="/"+data}return this.request(url,"get")},create:function(resource,data){return this.request(resource,"post",data)},update:function(resource,id,data){var url=resource+"/"+id;return this.request(url,"put",data)},delete:function(resource,id){var url=resource+"/"+id;return this.request(url,"delete")},request:function(url,method,data){return ajax({method:method,url:prefix+domain+"/"+url,data:data})}}})();(function(){getUrlParams=function(){var urlParams={};var match,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},query=window.location.search.substring(1);while(match=search.exec(query)){urlParams[decode(match[1])]=decode(match[2])}return urlParams}})();(function(){var loaded=false;var callbacks=[];loadHandler={add:function(callback){if(loaded){callback()}else{callbacks.push(callback)}}};window.onload=function(){loaded=true;for(i in callbacks){callbacks[i]()}}})();(function(){var params=getUrlParams();api.setDomain(params.api);api.receive("values/minutes",{metric_id:15},true).then(function(data){var minutes=data.values["2017-03-25"];var data=[];var count=0;for(var i=1;i<=1440;i++){if(minutes[i]){count+=minutes[i]}if(i%5==0){data.push({x:i,y:count});count=0}}loadHandler.add(function(){graph(data)})});function graph(data){var graph=new Rickshaw.Graph({element:document.getElementById("graph"),renderer:"bar",height:300,padding:{top:0,right:0,bottom:0,left:0},series:[{color:"steelblue",name:"today",data:data}]});graph.render();var hoverDetail=new Rickshaw.Graph.HoverDetail({graph:graph});var legend=new Rickshaw.Graph.Legend({graph:graph,element:document.getElementById("legend")});var xAxis=new Rickshaw.Graph.Axis.Time({graph:graph});xAxis.render();var shelving=new Rickshaw.Graph.Behavior.Series.Toggle({graph:graph,legend:legend});var axes=new Rickshaw.Graph.Axis.Time({graph:graph});axes.render()}})();
